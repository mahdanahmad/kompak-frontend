{"version":3,"sources":["../../../js/dashboard/userController.js"],"names":["app","controller","$scope","fetcher","$timeout","limit","iterate","typeDelay","data","pauseAjx","doneAjx","loadMoar","_","omitBy","offset","like","search","length","orderby","value","isNil","getAllUser","response","status_code","result","concat","delayTimeout","$watch","newVal","oldVal","cancel","init","orderOptions","title","order","head","selectSort","selected"],"mappings":"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","file":"userController.js","sourcesContent":["app.controller('UserController', ['$scope', 'fetcher', '$timeout', function ($scope, fetcher, $timeout) {\n    'use strict';\n\n\tlet limit\t\t= 10;\n\tlet iterate\t\t= 0;\n\tlet typeDelay\t= 500;\n\n\t$scope.data\t\t= [];\n\t$scope.pauseAjx\t= false;\n\t$scope.doneAjx\t= false;\n\n\t$scope.loadMoar\t= () => {\n\t\t$scope.pauseAjx\t= true;\n\t\titerate++;\n\t\tlet data = _.omitBy({\n\t\t\tlimit,\n\t\t\toffset: iterate * limit,\n\t\t\tlike: $scope.search ? (($scope.search.length >= 3) ? $scope.search : null) : null,\n\t\t\torderby: $scope.orderby.value,\n\t\t}, _.isNil);\n\t\tfetcher.getAllUser(data, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\tif (response.result.length < limit) { $scope.doneAjx = true; }\n\t\t\t\t$scope.data \t= _.concat($scope.data, response.result);\n\t\t\t} else {\n\t\t\t\t$scope.doneAjx\t= true;\n\t\t\t}\n\t\t\t$scope.pauseAjx\t= false;\n\t\t});\n\t}\n\n\tlet delayTimeout;\n\t$scope.$watch('search', (newVal, oldVal) => {\n\t\tif (delayTimeout) $timeout.cancel(delayTimeout);\n\n\t\tdelayTimeout\t= $timeout(() => {\n\t\t\tif (newVal !== oldVal && newVal.length >= 3) {\n\t\t\t\tinit(newVal);\n\t\t\t} else if (newVal == '') {\n\t\t\t\tinit();\n\t\t\t}\n\t\t}, typeDelay);\n\t});\n\n\t$scope.orderOptions\t= [\n\t\t{ title: 'name', value: 'usr_display_name', order: 'ASC' },\n\t\t{ title: 'designation', value: 'usr_designation', order: 'ASC' },\n\t\t{ title: 'village', value: 'usr_village', order: 'ASC' },\n\t\t{ title: 'age', value: 'usr_years', order: 'ASC' },\n\t\t{ title: 'score', value: 'usr_score', order: 'ASC' },\n\t\t{ title: 'contribution', value: 'usr_contribution', order: 'ASC' },\n\t];\n\n\t$scope.orderby\t\t= _.head($scope.orderOptions);\n\t$scope.selectSort\t= (selected) => {\n\t\tif ($scope.orderby.title == selected.title) {\n\t\t\tselected.order\t= selected.order == 'ASC' ? 'DESC' : 'ASC';\n\t\t} else {\n\t\t\tselected.order\t= 'ASC';\n\t\t}\n\n\t\t$scope.orderby = selected;\n\n\t\tinit($scope.search ? (($scope.search.length >= 3) ? $scope.search : null) : null);\n\t}\n\n\tlet init\t= (like) => {\n\t\t$scope.pauseAjx\t= true;\n\t\titerate\t= 0;\n\t\tfetcher.getAllUser(_.omitBy({ limit, like, offset: 0, orderby: $scope.orderby.value + ' ' + $scope.orderby.order }, _.isNil), (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t$scope.data\t= response.result;\n\t\t\t\tif (response.result.length < limit) {\n\t\t\t\t\t$scope.doneAjx = true;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.doneAjx\t= false;\n\t\t\t\t}\n\t\t\t\t$scope.pauseAjx\t= false;\n\t\t\t}\n\t\t});\n\t}\n\n\tinit();\n}]);\n"]}