{"version":3,"sources":["../../../js/dashboard/dashboardController.js"],"names":["app","controller","$scope","$location","$document","$state","localStorageService","fetcher","dialog","menus","title","icon","state","active","url","split","setActive","selected","go","logout","remove","editprofile","async","waterfall","callback","getAdmin","get","response","status_code","result","message","adminData","before","_","clone","profileDialog","isObject","isEqual","pick","err","console","log","isEmpty","newpassword","password","CryptoJS","SHA256","toString","putAdmin","notif","error","init","username","role"],"mappings":"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","file":"dashboardController.js","sourcesContent":["app.controller('DashboardController', ['$scope', '$location', '$document', '$state', 'localStorageService', 'fetcher', 'dialog', function ($scope, $location, $document, $state, localStorageService, fetcher, dialog) {\n    'use strict';\n\n\t$scope.menus\t\t= [\n\t\t{ title: 'Statistik', icon: 'line-chart', state: 'statistic' },\n\t\t{ title: 'Daftar Pemain', icon: 'user', state: 'user' },\n\t\t{ title: 'Daftar Admin', icon: 'gavel', state: 'admin' },\n\t\t{ title: 'Pertanyaan Pilihan Ganda', icon: 'th-large', state: 'choices' },\n\t\t{ title: 'Jawaban Pilihan Ganda', icon: 'square', state: 'choicesAns' },\n\t\t{ title: 'Pertanyaan Essai', icon: 'pencil-square-o', state: 'essay' },\n\t\t{ title: 'Jawaban Essai', icon: 'file-text-o', state: 'essayAns' },\n\t\t{ title: 'Lokasi', icon: 'map-o', state: 'location' },\n\t\t{ title: 'Pengaturan', icon: 'cogs', state: 'misc' },\n\t\t{ title: 'Logs', icon: 'newspaper-o', state: 'logs' },\n\t\t// { title: 'Category', icon: 'object-group', state: 'category' },\n\t\t// { title: 'Badge', icon: 'map-o', state: 'badge' },\n\t\t// { title: 'Institution', icon: 'university', state: 'institution' },\n\t\t// { title: 'Education', icon: 'graduation-cap', state: 'education' },\n\t\t// { title: 'Setting', icon: 'cogs', state: 'setting' },\n\t];\n\n\n\t$scope.active\t= $location.url().split('/')[1];\n\t$scope.setActive\t= (selected) => { $scope.active = selected; $state.go('dashboard.' + selected); }\n\n\n\t$scope.logout\t= () => {\n\t\tlocalStorageService.remove('id', 'role');\n\t\t$state.go('auth');\n\t};\n\n\t$scope.editprofile\t= () => {\n\t\tasync.waterfall([\n\t\t\t(callback) => {\n\t\t\t\tfetcher.getAdmin(localStorageService.get('id'), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tcallback(null, response.result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t(adminData, callback) => {\n\t\t\t\tlet before\t= _.clone(adminData);\n\t\t\t\tdialog.profileDialog(adminData, (response) => {\n\t\t\t\t\tif (_.isObject(response) && !_.isEqual(before, response)) {\n\t\t\t\t\t\tcallback(null, _.pick(response, ['name', 'username', 'email', 'newpassword']));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t], (err, result) => {\n\t\t\tif (err) { console.log(err); }\n\n\t\t\tif (result) {\n\t\t\t\tif (!_.isEmpty(result.newpassword)) { result.password = CryptoJS.SHA256(result.newpassword).toString(); }\n\t\t\t\tfetcher.putAdmin(localStorageService.get('id'), result, (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tdialog.notif('data anda berhasil diperbarui.')\n\t\t\t\t\t} else if (response.message == \"Duplicate primary key(s). Please check again your input.\") {\n\t\t\t\t\t\tdialog.error(\"Pengubahan data gagal, username sudah terpakai.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdialog.error(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\tlet init\t= () => {\n\t\tfetcher.getAdmin(localStorageService.get('id'), (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t$scope.username\t= response.result.username;\n\t\t\t\t$scope.role\t\t= response.result.role;\n\t\t\t}\n\t\t});\n\t}\n\tinit();\n}]);\n"]}