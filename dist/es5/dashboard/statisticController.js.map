{"version":3,"sources":["../../../js/dashboard/statisticController.js"],"names":["app","controller","$scope","fetcher","$interval","$timeout","$window","dialog","globalVar","refreshRate","pieColor","data","pieoptions","chart","type","x","o","name","y","jumlah","showLabels","duration","labelThreshold","labelSunbeamLayout","labelsOutside","valueFormat","d3","format","cornerRadius","showLegend","color","i","legend","baroptions","margin","top","right","bottom","left","label","showValues","overview","model","init","getStatistic","response","status_code","result","currentTime","moment","maxVillage","_","chain","get","maxBy","value"],"mappings":"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","file":"statisticController.js","sourcesContent":["app.controller('StatisticController', ['$scope', 'fetcher', '$interval', '$timeout', '$window', 'dialog', 'globalVar', function ($scope, fetcher, $interval, $timeout, $window, dialog, globalVar) {\n    'use strict';\n\n\tlet refreshRate\t= 5; // in minutes\n\n\tlet pieColor\t= ['#535657', '#4F646F', '#519872', '#97B1A6', '#79AEA3', '#8E936D', '#779FA1', '#88AB75', '#2D93AD', '08605F', '#177E89'];\n\n\t$scope.data\t= {};\n\t$scope.pieoptions = {\n\t\tchart: {\n\t\t\ttype: 'pieChart',\n\t\t\t// width: 400,\n\t\t\t// height: 500,\n\t\t\tx: (o) => (o.name),\n\t\t\ty: (o) => (o.jumlah),\n\t\t\tshowLabels: false,\n\t\t\tduration: 500,\n\t\t\tlabelThreshold: 0.01,\n\t\t\tlabelSunbeamLayout: true,\n\t\t\tlabelsOutside: false,\n\t\t\tvalueFormat: (o) => (d3.format(\",\")(o)),\n\t\t\tcornerRadius: 4,\n\t\t\tshowLegend: false,\n\t\t\tcolor: (o, i) => (pieColor[i] || '#000'),\n\t\t\tlegend: {}\n\t\t}\n\t};\n\n\t$scope.baroptions = {\n\t\tchart: {\n\t\t\ttype: 'discreteBarChart',\n\t\t\tmargin : {\n\t\t\t\ttop: 20,\n\t\t\t\tright: 20,\n\t\t\t\tbottom: 50,\n\t\t\t\tleft: 55\n\t\t\t},\n\t\t\tx: (o) => (o.label),\n\t\t\ty: (o) => (o.jumlah),\n\t\t\tshowValues: true,\n\t\t\tvalueFormat: (o) => (d3.format(\",\")(o)),\n\t\t\tduration: 500,\n\t\t\tcolor: (o, i) => ('#6dc0f9'),\n\t\t}\n\t};\n\n\t$scope.overview\t= [\n\t\t[\n\t\t\t{ label: 'users', model: 'total'},\n\t\t\t{ label: 'login', model: 'login'},\n\t\t\t{ label: 'transactions', model: 'transaction'},\n\t\t],\n\t\t[\n\t\t\t{ label: 'provinces', model: 'province'},\n\t\t\t{ label: 'regencies', model: 'regency'},\n\t\t\t{ label: 'districts', model: 'district'},\n\t\t\t{ label: 'villages', model: 'village'},\n\t\t],\n\t]\n\n\tlet init = () => {\n\t\tfetcher.getStatistic((response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t$scope.data\t= response.result;\n\t\t\t\t$scope.currentTime = moment().format(\"dddd, MMMM Do YYYY, h:mm a\");\n\t\t\t\t$scope.maxVillage = _.chain(response).get(['result', 'topvillage']).maxBy('jumlah').get('jumlah').value() || 1;\n\t\t\t}\n\t\t});\n\t}\n\n\tinit();\n\t$interval(() => { init(); }, refreshRate * 60 * 1000);\n}]);\n"]}