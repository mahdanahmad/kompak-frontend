{"version":3,"sources":["../../../../js/dashboard/choices/questionController.js"],"names":["app","controller","$scope","fetcher","$timeout","dialog","globalVar","limit","iterate","typeDelay","category","data","pauseAjx","doneAjx","search","nodata","loading","status","questionStatus","startDate","moment","year","startOf","toDate","endDate","dateChange","init","downloadLink","getFilesLink","_","omitBy","startdate","format","dateFormat","enddate","like","getSearch","id","isNil","length","openHint","notif","choicesHint","loadMoar","offset","getAllQuestion","response","status_code","result","concat","delayTimeout","$watch","newVal","oldVal","cancel","initData","selectCate","selected","newQuestion","choicesDialog","categories","dialResp","isObject","question_enabled","postQuestion","mapValues","toString","edit","async","waterfall","callback","getQuestion","message","questionData","before","clone","isEqual","err","console","log","putQuestion","ID_question","chain","omit","value","changeEna","o","e","stopPropagation","changeStatus","wish","delete","question","confirm","deleteQuestion","getAllCategory","map","ID_category","name","category_name","sortBy","unshift","head"],"mappings":"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","file":"questionController.js","sourcesContent":["app.controller('ChoicesController', ['$scope', 'fetcher', '$timeout', 'dialog', 'globalVar', function ($scope, fetcher, $timeout, dialog, globalVar) {\n    'use strict';\n\n\tlet limit\t\t= 10;\n\tlet iterate\t\t= 0;\n\tlet typeDelay\t= 500;\n\n\t// $scope.categories\t= [];\n\t$scope.category\t\t= {};\n\n\t$scope.data\t\t= [];\n\t$scope.pauseAjx\t= false;\n\t$scope.doneAjx\t= false;\n\n\t$scope.search\t= \"\";\n\t$scope.nodata\t= null;\n\t$scope.loading\t= globalVar.loading;\n\t$scope.status\t= globalVar.questionStatus;\n\n\t$scope.startDate\t= moment().year(2017).startOf('year').toDate();\n\t$scope.endDate\t\t= moment().toDate();\n\t$scope.dateChange\t= () => { init(); }\n\t$scope.downloadLink\t= () => (fetcher.getFilesLink('choicesdata', _.omitBy({\n\t\tstartdate: moment($scope.startDate).format(globalVar.dateFormat),\n\t\tenddate: moment($scope.endDate).format(globalVar.dateFormat),\n\t\tlike: getSearch(),\n\t\tcategory: $scope.category.id\n\t}, _.isNil)));\n\n\tlet getSearch\t= () => ($scope.search ? (($scope.search.length >= 3) ? $scope.search : null) : null);\n\n\t$scope.openHint\t= () => { dialog.notif(globalVar.choicesHint); }\n\n\t$scope.loadMoar\t= () => {\n\t\t$scope.pauseAjx\t= true;\n\t\titerate++;\n\t\tlet data = _.omitBy({\n\t\t\tlimit,\n\t\t\toffset: iterate * limit,\n\t\t\tlike: getSearch(),\n\t\t\tcategory: $scope.category.id,\n\t\t\tstartdate: moment($scope.startDate).format(globalVar.dateFormat),\n\t\t\tenddate: moment($scope.endDate).format(globalVar.dateFormat)\n\t\t}, _.isNil);\n\t\tfetcher.getAllQuestion(data, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200 && response.result) {\n\t\t\t\tif (response.result.length < limit) { $scope.doneAjx = true; }\n\t\t\t\t$scope.data \t= _.concat($scope.data, response.result);\n\t\t\t} else {\n\t\t\t\t$scope.doneAjx\t= true;\n\t\t\t}\n\t\t\t$scope.pauseAjx\t= false;\n\t\t});\n\t};\n\n\tlet delayTimeout;\n\t$scope.$watch('search', (newVal, oldVal) => {\n\t\tif (!_.isNil(newVal) && newVal !== oldVal) {\n\t\t\tif (delayTimeout) $timeout.cancel(delayTimeout);\n\n\t\t\tdelayTimeout\t= $timeout(() => {\n\t\t\t\tif (newVal.length >= 3) {\n\t\t\t\t\tinitData(newVal);\n\t\t\t\t} else if (newVal == '' && !$scope.pauseAjx) {\n\t\t\t\t\tinitData();\n\t\t\t\t}\n\t\t\t}, typeDelay);\n\t\t} else {\n\t\t\t$scope.search = '';\n\t\t}\n\t});\n\n\t$scope.selectCate\t= (selected) => { $scope.category = selected; initData(getSearch()); }\n\n\t$scope.newQuestion\t= () => {\n\t\tdialog.choicesDialog({ categories: $scope.categories }, (dialResp) => {\n\t\t\tif (_.isObject(dialResp)) {\n\t\t\t\tdialResp.status\t\t\t\t= '1';\n\t\t\t\tdialResp.question_enabled\t= dialResp.question_enabled ? '1' : '0';\n\t\t\t\tfetcher.postQuestion(_.mapValues(dialResp, _.toString), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tinitData(getSearch());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\t$scope.edit\t= (id) => {\n\t\tasync.waterfall([\n\t\t\t(callback) => {\n\t\t\t\tfetcher.getQuestion(id, (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tcallback(null, response.result);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t(questionData, callback) => {\n\t\t\t\tlet before\t= _.clone(questionData);\n\t\t\t\tdialog.choicesDialog({ data: questionData, categories: $scope.categories }, (response) => {\n\t\t\t\t\tif (_.isObject(response) && !_.isEqual(before, response)) {\n\t\t\t\t\t\tcallback(null, response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallback(null);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t], (err, result) => {\n\t\t\tif (err) { console.log(err); }\n\n\t\t\tif (result) {\n\t\t\t\tresult.question_enabled\t= result.question_enabled ? '1' : '0';\n\t\t\t\tfetcher.putQuestion(result.ID_question, _.chain(result).mapValues(_.toString).omit(['no_of_times_correctly_answered', 'no_of_times_incorrectly_answered', 'no_of_times_presented_as_challenge', 'no_of_times_response_1', 'no_of_times_response_2', 'no_of_times_response_3', 'no_of_times_response_4']).value(), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tinitData(getSearch());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\t$scope.changeEna\t= (o, e) => {\n\t\te.stopPropagation();\n\t\tlet question_enabled\t= o.question_enabled ? '0' : '1';\n\n\t\tfetcher.putQuestion(o.ID_question, { question_enabled }, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\to.question_enabled\t= !o.question_enabled;\n\t\t\t}\n\t\t});\n\t};\n\t$scope.changeStatus\t= (o, wish, e) => {\n\t\te.stopPropagation();\n\n\t\tfetcher.putQuestion(o.ID_question, { status: _.toString(wish) }, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\to.status\t= wish;\n\t\t\t}\n\t\t});\n\t};\n\t$scope.delete\t= (id, question, e) => {\n\t\te.stopPropagation();\n\t\tdialog.confirm('Apakah anda yakin akan menghapus pertanyaan \\\"' + question + '\\\"?', (response) => {\n\t\t\tif (response) {\n\t\t\t\tfetcher.deleteQuestion(id, (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tinitData(getSearch());\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tlet initData\t= (like) => {\n\t\t$scope.pauseAjx\t= true;\n\t\t$scope.nodata\t= null;\n\t\titerate\t= 0;\n\t\tfetcher.getAllQuestion(_.omitBy({ limit, like, offset: 0, category: $scope.category.id, startdate: moment($scope.startDate).format(globalVar.dateFormat), enddate: moment($scope.endDate).format(globalVar.dateFormat) }, _.isNil), (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t$scope.data\t= response.result;\n\t\t\t\tif (!response.result) {\n\t\t\t\t\t$scope.nodata = globalVar.nodata; $scope.doneAjx = true;\n\t\t\t\t} else  if (response.result.length < limit) {\n\t\t\t\t\t$scope.doneAjx = true;\n\t\t\t\t} else {\n\t\t\t\t\t$scope.doneAjx\t= false;\n\t\t\t\t}\n\t\t\t\t$scope.pauseAjx\t= false;\n\t\t\t}\n\t\t});\n\t}\n\n\tlet init = () => {\n\t\tfetcher.getAllCategory({}, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t$scope.categories\t= _.chain(response.result).map((o) => ({ id: o.ID_category, name: o.category_name })).sortBy(['name']).unshift({ id: null, name: 'Semua' }).value();\n\t\t\t\t$scope.category\t\t= _.head($scope.categories);\n\n\t\t\t\tinitData();\n\t\t\t}\n\t\t});\n\t}\n\n\tinit();\n}]);\n"]}