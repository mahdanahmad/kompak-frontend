{"version":3,"sources":["../../../js/dashboard/miscController.js"],"names":["app","controller","$scope","fetcher","$timeout","dialog","globalVar","setting","categories","badges","institutions","educations","settingInputs","label","model","tag","type","updateSetting","putSetting","_","mapValues","toString","response","status_code","notif","settingUpdated","error","globalError","new","state","funcName","includes","dialResp","isObject","isNil","category_enabled","name","name_institution","education","upperFirst","fetch","edit","o","id","content","ID_category","clone","ID_Badge","data","chain","mapKeys","key","value","message","delete","e","stopPropagation","confirm","changeEna","putCategory","getSetting","result","category","getAllCategory","badge","getAllBadge","institution","getAllInstitution","getAllEducation","init"],"mappings":";;AAAAA,IAAIC,UAAJ,CAAe,gBAAf,EAAiC,CAAC,QAAD,EAAW,SAAX,EAAsB,UAAtB,EAAkC,QAAlC,EAA4C,WAA5C,EAAyD,UAAUC,MAAV,EAAkBC,OAAlB,EAA2BC,QAA3B,EAAqCC,MAArC,EAA6CC,SAA7C,EAAwD;AAC9I;;AACHJ,QAAOK,OAAP,GAAmB,EAAnB;AACAL,QAAOM,UAAP,GAAqB,EAArB;AACAN,QAAOO,MAAP,GAAkB,EAAlB;AACAP,QAAOQ,YAAP,GAAuB,EAAvB;AACAR,QAAOS,UAAP,GAAqB,EAArB;;AAEAT,QAAOU,aAAP,GAAuB,CACtB,EAAEC,OAAO,SAAT,EAAoBC,OAAO,SAA3B,EAAsCC,KAAK,OAA3C,EAAoDC,MAAM,MAA1D,EADsB,EAEtB,EAAEH,OAAO,MAAT,EAAiBC,OAAO,MAAxB,EAAgCC,KAAK,OAArC,EAA8CC,MAAM,QAApD,EAFsB,EAGtB,EAAEH,OAAO,0BAAT,EAAqCC,OAAO,mBAA5C,EAAiEC,KAAK,OAAtE,EAA+EC,MAAM,QAArF,EAHsB,CAAvB;AAKAd,QAAOe,aAAP,GAAuB,YAAM;AAC5Bd,UAAQe,UAAR,CAAmBC,EAAEC,SAAF,CAAYlB,OAAOK,OAAnB,EAA4BY,EAAEE,QAA9B,CAAnB,EAA4D,UAACC,QAAD,EAAc;AACzE,OAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAC7DlB,WAAOmB,KAAP,CAAalB,UAAUmB,cAAvB;AACA,IAFD,MAEO;AACNpB,WAAOqB,KAAP,CAAapB,UAAUqB,WAAvB;AACA;AACD,GAND;AAOA,EARD;;AAUAzB,QAAO0B,GAAP,GAAc,UAACC,KAAD,EAAW;AACxB,MAAIC,WAAWX,EAAEY,QAAF,CAAW,CAAC,aAAD,EAAgB,WAAhB,CAAX,EAAyCF,KAAzC,IAAkD,YAAlD,GAAkEA,QAAQ,QAAzF;AACAxB,SAAOyB,QAAP,EAAiBX,EAAEY,QAAF,CAAW,CAAC,aAAD,EAAgB,WAAhB,CAAX,EAAyCF,KAAzC,IAAkD,EAAEA,YAAF,EAAlD,GAA8D,EAA/E,EAAmF,UAACG,QAAD,EAAc;AAChG,OAAIb,EAAEc,QAAF,CAAWD,QAAX,CAAJ,EAA0B;AACzB,QAAI,CAACb,EAAEe,KAAF,CAAQF,SAASG,gBAAjB,CAAL,EAAyC;AAAEH,cAASG,gBAAT,GAA6BH,SAASG,gBAAV,GAA8B,GAA9B,GAAoC,GAAhE;AAAsE;AACjH,QAAI,CAAChB,EAAEe,KAAF,CAAQF,SAASI,IAAjB,CAAD,IAA2BP,SAAS,aAAxC,EAAuD;AAAEG,cAASK,gBAAT,GAA4BL,SAASI,IAArC;AAA4C;AACrG,QAAI,CAACjB,EAAEe,KAAF,CAAQF,SAASI,IAAjB,CAAD,IAA2BP,SAAS,WAAxC,EAAqD;AAAEG,cAASM,SAAT,GAAqBN,SAASI,IAA9B;AAAqC;AAC5FjC,YAAQ,SAASgB,EAAEoB,UAAF,CAAaV,KAAb,CAAjB,EAAsCV,EAAEC,SAAF,CAAYY,QAAZ,EAAsBb,EAAEE,QAAxB,CAAtC,EAAyE,UAACC,QAAD,EAAc;AACtF,SAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAC7DiB,YAAMX,KAAN;AACA;AACD,KAJD;AAKA;AACD,GAXD;AAYA,EAdD;;AAgBA3B,QAAOuC,IAAP,GAAc,UAACC,CAAD,EAAIb,KAAJ,EAAc;AAC3B,MAAIC,WAAWX,EAAEY,QAAF,CAAW,CAAC,aAAD,EAAgB,WAAhB,CAAX,EAAyCF,KAAzC,IAAkD,YAAlD,GAAkEA,QAAQ,QAAzF;AACA,MAAIc,KAAO,IAAX;AACA,MAAIC,UAAW,IAAf;AACA,UAAQf,KAAR;AACC,QAAK,UAAL;AAAiBc,SAAKD,EAAEG,WAAP,CAAoBD,UAAUzB,EAAE2B,KAAF,CAAQJ,CAAR,CAAV,CAAsB;AAC3D,QAAK,OAAL;AAAcC,SAAKD,EAAEK,QAAP,CAAiBH,UAAUzB,EAAE2B,KAAF,CAAQJ,CAAR,CAAV,CAAsB;AACrD;AAASC,SAAKD,EAAEC,EAAP,CAAWC,UAAU,EAAEI,MAAM7B,EAAE8B,KAAF,CAAQP,CAAR,EAAWI,KAAX,GAAmBI,OAAnB,CAA2B,UAACR,CAAD,EAAIS,GAAJ;AAAA,aAAahC,EAAEY,QAAF,CAAW,CAAC,kBAAD,EAAqB,WAArB,CAAX,EAA8CoB,GAA9C,IAAqD,MAArD,GAA8DA,GAA3E;AAAA,MAA3B,EAA4GC,KAA5G,EAAR,EAA6HvB,YAA7H,EAAV;AAHrB;;AAMAxB,SAAOyB,QAAP,EAAiBc,OAAjB,EAA0B,UAACZ,QAAD,EAAc;AACvC,OAAIb,EAAEc,QAAF,CAAWD,QAAX,CAAJ,EAA0B;AACzB,QAAI,CAACb,EAAEe,KAAF,CAAQF,SAASG,gBAAjB,CAAL,EAAyC;AAAEH,cAASG,gBAAT,GAA6BH,SAASG,gBAAV,GAA8B,GAA9B,GAAoC,GAAhE;AAAsE;AACjH,QAAI,CAAChB,EAAEe,KAAF,CAAQF,SAASI,IAAjB,CAAD,IAA2BP,SAAS,aAAxC,EAAuD;AAAEG,cAASK,gBAAT,GAA4BL,SAASI,IAArC;AAA4C;AACrG,QAAI,CAACjB,EAAEe,KAAF,CAAQF,SAASI,IAAjB,CAAD,IAA2BP,SAAS,WAAxC,EAAqD;AAAEG,cAASM,SAAT,GAAqBN,SAASI,IAA9B;AAAqC;AAC5FjC,YAAQ,QAAQgB,EAAEoB,UAAF,CAAaV,KAAb,CAAhB,EAAqCc,EAArC,EAAyCxB,EAAEC,SAAF,CAAYY,QAAZ,EAAsBb,EAAEE,QAAxB,CAAzC,EAA4E,UAACC,QAAD,EAAc;AACzF,SAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAC7DiB,YAAMX,KAAN;AACA,MAFD,MAEO;AACNxB,aAAOqB,KAAP,CAAaJ,SAAS+B,OAAtB;AACA;AACD,KAND;AAOA;AACD,GAbD;AAcA,EAxBD;;AA0BAnD,QAAOoD,MAAP,GAAgB,UAACX,EAAD,EAAKP,IAAL,EAAWP,KAAX,EAAkB0B,CAAlB,EAAwB;AACvCA,IAAEC,eAAF;AACAnD,SAAOoD,OAAP,CAAe,mCAAmC5B,KAAnC,GAA2C,KAA3C,GAAmDO,IAAnD,GAA0D,KAAzE,EAAgF,UAACd,QAAD,EAAc;AAC7F,OAAIA,QAAJ,EAAc;AACbnB,YAAQ,WAAWgB,EAAEoB,UAAF,CAAaV,KAAb,CAAnB,EAAwCc,EAAxC,EAA4C,UAACrB,QAAD,EAAc;AACzD,SAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAC7DiB,YAAMX,KAAN;AACA,MAFD,MAEO;AACNxB,aAAOqB,KAAP,CAAaJ,SAAS+B,OAAtB;AACA;AACD,KAND;AAOA;AACD,GAVD;AAWA,EAbD;;AAeAnD,QAAOwD,SAAP,GAAmB,UAAChB,CAAD,EAAIa,CAAJ,EAAU;AAC5BA,IAAEC,eAAF;AACA,MAAIrB,mBAAmBO,EAAEP,gBAAF,GAAqB,GAArB,GAA2B,GAAlD;;AAEAhC,UAAQwD,WAAR,CAAoBjB,EAAEG,WAAtB,EAAmC,EAAEV,kCAAF,EAAnC,EAAyD,UAACb,QAAD,EAAc;AACtE,OAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAEmB,MAAEP,gBAAF,GAAqB,CAACO,EAAEP,gBAAxB;AAA2C;AAC3G,GAFD;AAGA,EAPD;;AASA,KAAIK,QAAQ;AACXjC,WAAS,mBAAM;AAAEJ,WAAQyD,UAAR,CAAmB,UAACtC,QAAD,EAAc;AAAE,QAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAErB,YAAOK,OAAP,GAAiBe,SAASuC,MAA1B;AAAmC;AAAC,IAAvI;AAA2I,GADjJ;AAEXC,YAAU,oBAAM;AAAE3D,WAAQ4D,cAAR,CAAuB,EAAvB,EAA2B,UAACzC,QAAD,EAAc;AAAE,QAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAErB,YAAOM,UAAP,GAAoBc,SAASuC,MAA7B;AAAsC;AAAC,IAAlJ;AAAsJ,GAF7J;AAGXG,SAAO,iBAAM;AAAE7D,WAAQ8D,WAAR,CAAoB,EAApB,EAAwB,UAAC3C,QAAD,EAAc;AAAE,QAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAErB,YAAOO,MAAP,GAAgBa,SAASuC,MAAzB;AAAkC;AAAC,IAA3I;AAA+I,GAHnJ;AAIXK,eAAa,uBAAM;AAAE/D,WAAQgE,iBAAR,CAA0B,EAA1B,EAA8B,UAAC7C,QAAD,EAAc;AAAE,QAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAErB,YAAOQ,YAAP,GAAsBY,SAASuC,MAA/B;AAAwC;AAAC,IAAvJ;AAA2J,GAJrK;AAKXvB,aAAW,qBAAM;AAAEnC,WAAQiE,eAAR,CAAwB,EAAxB,EAA4B,UAAC9C,QAAD,EAAc;AAAE,QAAIA,SAASA,QAAT,IAAqB,IAArB,IAA6BA,SAASC,WAAT,IAAwB,GAAzD,EAA8D;AAAErB,YAAOS,UAAP,GAAoBW,SAASuC,MAA7B;AAAsC;AAAC,IAAnJ;AAAuJ;AAL/J,EAAZ;;AASA,KAAIQ,OAAO,SAAPA,IAAO,GAAM;AAAE7B,QAAMjC,OAAN,GAAiBiC,MAAMsB,QAAN,GAAkBtB,MAAMwB,KAAN,GAAexB,MAAM0B,WAAN,GAAqB1B,MAAMF,SAAN;AAAoB,EAA9G;;AAEA+B;AACA,CArGgC,CAAjC","file":"miscController.js","sourcesContent":["app.controller('MiscController', ['$scope', 'fetcher', '$timeout', 'dialog', 'globalVar', function ($scope, fetcher, $timeout, dialog, globalVar) {\n    'use strict';\n\t$scope.setting\t\t\t= {};\n\t$scope.categories\t\t= {};\n\t$scope.badges\t\t\t= {};\n\t$scope.institutions\t\t= {};\n\t$scope.educations\t\t= {};\n\n\t$scope.settingInputs\t= [\n\t\t{ label: 'version', model: 'version', tag: 'input', type: 'text' },\n\t\t{ label: 'life', model: 'life', tag: 'input', type: 'number' },\n\t\t{ label: 'number of top score list', model: 'num_top_skor_list', tag: 'input', type: 'number' },\n\t];\n\t$scope.updateSetting\t= () => {\n\t\tfetcher.putSetting(_.mapValues($scope.setting, _.toString), (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\tdialog.notif(globalVar.settingUpdated);\n\t\t\t} else {\n\t\t\t\tdialog.error(globalVar.globalError);\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.new\t\t= (state) => {\n\t\tlet funcName\t= _.includes(['institution', 'education'], state) ? 'loneDialog' : (state + 'Dialog');\n\t\tdialog[funcName](_.includes(['institution', 'education'], state) ? { state } : {}, (dialResp) => {\n\t\t\tif (_.isObject(dialResp)) {\n\t\t\t\tif (!_.isNil(dialResp.category_enabled)) { dialResp.category_enabled = (dialResp.category_enabled) ? '1' : '0'; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'institution') { dialResp.name_institution = dialResp.name; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'education') { dialResp.education = dialResp.name; }\n\t\t\t\tfetcher['post' + _.upperFirst(state)](_.mapValues(dialResp, _.toString), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.edit\t= (o, state) => {\n\t\tlet funcName\t= _.includes(['institution', 'education'], state) ? 'loneDialog' : (state + 'Dialog');\n\t\tlet id\t\t\t= null;\n\t\tlet content\t\t= null;\n\t\tswitch (state) {\n\t\t\tcase 'category': id = o.ID_category; content = _.clone(o); break;\n\t\t\tcase 'badge': id = o.ID_Badge; content = _.clone(o); break;\n\t\t\tdefault: id\t= o.id; content = { data: _.chain(o).clone().mapKeys((o, key) => (_.includes(['name_institution', 'education'], key) ? 'name' : key)).value(), state }\n\t\t}\n\n\t\tdialog[funcName](content, (dialResp) => {\n\t\t\tif (_.isObject(dialResp)) {\n\t\t\t\tif (!_.isNil(dialResp.category_enabled)) { dialResp.category_enabled = (dialResp.category_enabled) ? '1' : '0'; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'institution') { dialResp.name_institution = dialResp.name; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'education') { dialResp.education = dialResp.name; }\n\t\t\t\tfetcher['put' + _.upperFirst(state)](id, _.mapValues(dialResp, _.toString), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdialog.error(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\t$scope.delete\t= (id, name, state, e) => {\n\t\te.stopPropagation();\n\t\tdialog.confirm('Are you sure you wanna delete ' + state + ' \\\"' + name + '\\\"?', (response) => {\n\t\t\tif (response) {\n\t\t\t\tfetcher['delete' + _.upperFirst(state)](id, (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdialog.error(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.changeEna\t= (o, e) => {\n\t\te.stopPropagation();\n\t\tlet category_enabled = o.category_enabled ? '0' : '1';\n\n\t\tfetcher.putCategory(o.ID_category, { category_enabled }, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) { o.category_enabled\t= !o.category_enabled; }\n\t\t});\n\t};\n\n\tlet fetch\t= {\n\t\tsetting: () => { fetcher.getSetting((response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.setting = response.result; }}); },\n\t\tcategory: () => { fetcher.getAllCategory({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.categories = response.result; }}); },\n\t\tbadge: () => { fetcher.getAllBadge({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.badges = response.result; }}); },\n\t\tinstitution: () => { fetcher.getAllInstitution({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.institutions = response.result; }}); },\n\t\teducation: () => { fetcher.getAllEducation({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.educations = response.result; }}); },\n\t}\n\n\n\tlet init = () => { fetch.setting(); fetch.category(); fetch.badge(); fetch.institution(); fetch.education(); }\n\n\tinit();\n}]);\n"]}