{"version":3,"sources":["../../../js/dashboard/miscController.js"],"names":["app","controller","$scope","fetcher","$timeout","dialog","globalVar","setting","categories","badges","institutions","educations","settingMap","badge","category","education","institution","openHint","notif","miscHint","settingInputs","label","model","tag","type","updateSetting","putSetting","_","mapValues","toString","response","status_code","settingUpdated","error","globalError","new","state","funcName","includes","dialResp","isObject","isNil","category_enabled","name","name_institution","upperFirst","fetch","edit","o","$parent","role","id","content","ID_category","clone","ID_Badge","data","chain","mapKeys","key","value","message","delete","e","stopPropagation","confirm","changeEna","putCategory","getSetting","result","getAllCategory","getAllBadge","getAllInstitution","getAllEducation","init"],"mappings":"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","file":"miscController.js","sourcesContent":["app.controller('MiscController', ['$scope', 'fetcher', '$timeout', 'dialog', 'globalVar', function ($scope, fetcher, $timeout, dialog, globalVar) {\n    'use strict';\n\t$scope.setting\t\t\t= {};\n\t$scope.categories\t\t= {};\n\t$scope.badges\t\t\t= {};\n\t$scope.institutions\t\t= {};\n\t$scope.educations\t\t= {};\n\n\tlet settingMap\t\t\t= {\n\t\tbadge: 'lencana',\n\t\tcategory: 'kategori',\n\t\teducation: 'pendidikan',\n\t\tinstitution: 'lembaga'\n\t};\n\n\t$scope.openHint\t= () => { dialog.notif(globalVar.miscHint); }\n\n\t$scope.settingInputs\t= [\n\t\t{ label: 'versi aplikasi', model: 'version', tag: 'input', type: 'text' },\n\t\t{ label: 'life', model: 'life', tag: 'input', type: 'number' },\n\t\t{ label: 'jumlah pemain pada daftar top score', model: 'num_top_skor_list', tag: 'input', type: 'number' },\n\t];\n\t$scope.updateSetting\t= () => {\n\t\tfetcher.putSetting(_.mapValues($scope.setting, _.toString), (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\tdialog.notif(globalVar.settingUpdated);\n\t\t\t} else {\n\t\t\t\tdialog.error(globalVar.globalError);\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.new\t\t= (state) => {\n\t\tlet funcName\t= _.includes(['institution', 'education'], state) ? 'loneDialog' : (state + 'Dialog');\n\t\tdialog[funcName](_.includes(['institution', 'education'], state) ? { state: settingMap[state] } : {}, (dialResp) => {\n\t\t\tif (_.isObject(dialResp)) {\n\t\t\t\tif (!_.isNil(dialResp.category_enabled)) { dialResp.category_enabled = (dialResp.category_enabled) ? '1' : '0'; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'institution') { dialResp.name_institution = dialResp.name; }\n\t\t\t\tif (!_.isNil(dialResp.name) && state == 'education') { dialResp.education = dialResp.name; }\n\t\t\t\tfetcher['post' + _.upperFirst(state)](_.mapValues(dialResp, _.toString), (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.edit\t= (o, state) => {\n\t\tif ($scope.$parent.role) {\n\t\t\tlet funcName\t= _.includes(['institution', 'education'], state) ? 'loneDialog' : (state + 'Dialog');\n\t\t\tlet id\t\t\t= null;\n\t\t\tlet content\t\t= null;\n\t\t\tswitch (state) {\n\t\t\t\tcase 'category': id = o.ID_category; content = _.clone(o); break;\n\t\t\t\tcase 'badge': id = o.ID_Badge; content = _.clone(o); break;\n\t\t\t\tdefault: id\t= o.id; content = { data: _.chain(o).clone().mapKeys((o, key) => (_.includes(['name_institution', 'education'], key) ? 'name' : key)).value(), state }\n\t\t\t}\n\n\t\t\tdialog[funcName](content, (dialResp) => {\n\t\t\t\tif (_.isObject(dialResp)) {\n\t\t\t\t\tif (!_.isNil(dialResp.category_enabled)) { dialResp.category_enabled = (dialResp.category_enabled) ? '1' : '0'; }\n\t\t\t\t\tif (!_.isNil(dialResp.name) && state == 'institution') { dialResp.name_institution = dialResp.name; }\n\t\t\t\t\tif (!_.isNil(dialResp.name) && state == 'education') { dialResp.education = dialResp.name; }\n\t\t\t\t\tfetcher['put' + _.upperFirst(state)](id, _.mapValues(dialResp, _.toString), (response) => {\n\t\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdialog.error(response.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.delete\t= (id, name, state, e) => {\n\t\te.stopPropagation();\n\t\tdialog.confirm('Apakah anda yakin akan menghapus ' + settingMap[state] + ' \\\"' + name + '\\\"?', (response) => {\n\t\t\tif (response) {\n\t\t\t\tfetcher['delete' + _.upperFirst(state)](id, (response) => {\n\t\t\t\t\tif (response.response == 'OK' && response.status_code == 200) {\n\t\t\t\t\t\tfetch[state]();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdialog.error(response.message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t$scope.changeEna\t= (o, e) => {\n\t\te.stopPropagation();\n\t\tlet category_enabled = o.category_enabled ? '0' : '1';\n\n\t\tfetcher.putCategory(o.ID_category, { category_enabled }, (response) => {\n\t\t\tif (response.response == 'OK' && response.status_code == 200) { o.category_enabled\t= !o.category_enabled; }\n\t\t});\n\t};\n\n\tlet fetch\t= {\n\t\tsetting: () => { fetcher.getSetting((response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.setting = response.result; }}); },\n\t\tcategory: () => { fetcher.getAllCategory({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.categories = response.result; }}); },\n\t\tbadge: () => { fetcher.getAllBadge({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.badges = response.result; }}); },\n\t\tinstitution: () => { fetcher.getAllInstitution({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.institutions = response.result; }}); },\n\t\teducation: () => { fetcher.getAllEducation({}, (response) => { if (response.response == 'OK' && response.status_code == 200) { $scope.educations = response.result; }}); },\n\t}\n\n\n\tlet init = () => { fetch.setting(); fetch.category(); fetch.badge(); fetch.institution(); fetch.education(); }\n\n\tinit();\n}]);\n"]}