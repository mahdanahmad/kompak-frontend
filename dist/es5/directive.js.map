{"version":3,"sources":["../../js/directive.js"],"names":["app","directive","$timeout","link","scope","elem","attrs","focus","$document","require","restrict","ngModel","bind","e","keyCode","which","tagName","angular","element","activeElement","_","includes","String","fromCharCode","openDropdown","childNode","child","children","length","current","concat","chain","pick","times","values","value","theFunction","$apply","target"],"mappings":";;AAAAA,IAAIC,SAAJ,CAAc,WAAd,EAA2B,CAAC,UAAD,EAAa,UAACC,QAAD;AAAA,QAAe;AACnDC,QAAM,cAACC,KAAD,EAAQC,IAAR,EAAcC,KAAd,EAAwB;AAC1BJ,YAAS,YAAM;AAAEG,SAAKE,KAAL;AAAe,IAAhC;AACH;AAHkD,EAAf;AAAA,CAAb,CAA3B;;AAMAP,IAAIC,SAAJ,CAAc,gBAAd,EAAgC,CAAC,WAAD,EAAc,UAACO,SAAD;AAAA,QAAgB;AAC7DC,WAAS,SADoD;AAE7DC,YAAU,GAFmD;AAG7DN,SAAO,EAAEO,SAAS,GAAX,EAHsD;AAI7DR,QAAM,cAACC,KAAD,EAAQC,IAAR,EAAcC,KAAd,EAAwB;AAC7BE,aAAUI,IAAV,CAAe,UAAf,EAA2B,UAACC,CAAD,EAAO;AACjC,QAAIC,UAAUD,EAAEE,KAAF,IAAWF,EAAEC,OAA3B;AACA,QAAIE,UAAUC,QAAQC,OAAR,CAAgBV,UAAU,CAAV,EAAaW,aAA7B,EAA4C,CAA5C,EAA+CH,OAA7D;;AAEA,QAAI,CAACI,EAAEC,QAAF,CAAW,CAAC,EAAD,CAAX,EAAiBP,OAAjB,CAAD,IAA8B,CAACM,EAAEC,QAAF,CAAW,CAAC,OAAD,EAAU,UAAV,CAAX,EAAkCL,OAAlC,CAAnC,EAA+E;AAC9E;AACA;AACAZ,WAAMO,OAAN,IAAiBW,OAAOC,YAAP,CAAoBT,OAApB,CAAjB;AACAT,UAAKE,KAAL;AACA;AACD,IAVD;AAWA;AAhB4D,EAAhB;AAAA,CAAd,CAAhC;;AAmBAP,IAAIC,SAAJ,CAAc,cAAd,EAA8B,CAAC,WAAD,EAAc,UAACO,SAAD;AAAA,QAAgB;AAC3DE,YAAU,GADiD;AAE3DN,SAAO,EAAEoB,cAAc,GAAhB,EAFoD;AAG3DrB,QAAM,cAACC,KAAD,EAAQC,IAAR,EAAcC,KAAd,EAAwB;AAC7BF,SAAMoB,YAAN,GAAqB,KAArB;;AAEA,OAAIC,YAAY,CAACpB,KAAK,CAAL,CAAD,CAAhB;AACA,OAAIqB,QAASrB,KAAKsB,QAAL,GAAgBC,MAA7B;AACA,OAAIC,UAAWxB,KAAKsB,QAAL,EAAf;AACA,UAAOD,KAAP,EAAc;AACbD,gBAAYL,EAAEU,MAAF,CAASL,SAAT,EAAoBL,EAAEW,KAAF,CAAQF,OAAR,EAAiBG,IAAjB,CAAsBZ,EAAEa,KAAF,CAAQJ,QAAQD,MAAhB,CAAtB,EAA+CM,MAA/C,GAAwDC,KAAxD,EAApB,CAAZ;AACAN,cAAWA,QAAQF,QAAR,EAAX;AACAD,YAASG,QAAQD,MAAjB;AACA;AACD,YAASQ,WAAT,CAAqBvB,CAArB,EAAwB;AAAET,UAAMiC,MAAN,CAAa,YAAM;AAAEjC,WAAMoB,YAAN,GAAqB,CAACpB,MAAMoB,YAA5B;AAA2C,KAAhE;AAAoE;;AAE9F;AACAnB,QAAKO,IAAL,CAAU,OAAV,EAAmBwB,WAAnB;;AAEA5B,aAAUI,IAAV,CAAe,OAAf,EAAwB,UAACC,CAAD,EAAO;AAC9B,QAAIO,EAAEC,QAAF,CAAWI,SAAX,EAAsBZ,EAAEyB,MAAxB,CAAJ,EAAqC;AACrClC,UAAMiC,MAAN,CAAa,YAAM;AAAEjC,WAAMoB,YAAN,GAAqB,KAArB;AAA6B,KAAlD;AACA,IAHD;AAIA;AAvB0D,EAAhB;AAAA,CAAd,CAA9B","file":"directive.js","sourcesContent":["app.directive('autofocus', ['$timeout', ($timeout) => ({\n    link: (scope, elem, attrs) => {\n        $timeout(() => { elem.focus(); });\n    }\n})]);\n\napp.directive('typeEverywhere', ['$document', ($document) => ({\n\trequire: 'ngModel',\n\trestrict: 'A',\n\tscope: { ngModel: '=' },\n\tlink: (scope, elem, attrs) => {\n\t\t$document.bind('keypress', (e) => {\n\t\t\tlet keyCode\t= e.which || e.keyCode;\n\t\t\tlet tagName\t= angular.element($document[0].activeElement)[0].tagName;\n\n\t\t\tif (!_.includes([13], keyCode) && !_.includes(['INPUT', 'TEXTAREA'], tagName)) {\n\t\t\t\t// console.log('Got keypress:', String.fromCharCode(keyCode), keyCode);\n\t\t\t\t// if (_.isNil(scope.ngModel)) { scope.ngModel = ''; }\n\t\t\t\tscope.ngModel += String.fromCharCode(keyCode);\n\t\t\t\telem.focus();\n\t\t\t}\n\t\t});\n\t}\n})]);\n\napp.directive('openDropdown', ['$document', ($document) => ({\n\trestrict: 'A',\n\tscope: { openDropdown: '=' },\n\tlink: (scope, elem, attrs) => {\n\t\tscope.openDropdown\t= false;\n\n\t\tlet childNode\t= [elem[0]];\n\t\tlet child\t\t= elem.children().length;\n\t\tlet current\t\t= elem.children();\n\t\twhile (child) {\n\t\t\tchildNode\t= _.concat(childNode, _.chain(current).pick(_.times(current.length)).values().value());\n\t\t\tcurrent\t\t= current.children();\n\t\t\tchild\t\t= current.length;\n\t\t}\n\t\tfunction theFunction(e) { scope.$apply(() => { scope.openDropdown = !scope.openDropdown; }); }\n\n\t\t// elem.bind('mouseover', theFunction);\n\t\telem.bind('click', theFunction);\n\n\t\t$document.bind('click', (e) => {\n\t\t\tif (_.includes(childNode, e.target)) return;\n\t\t\tscope.$apply(() => { scope.openDropdown = false; });\n\t\t});\n\t}\n})]);\n"]}